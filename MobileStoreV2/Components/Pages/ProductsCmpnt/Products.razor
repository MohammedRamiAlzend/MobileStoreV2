@page "/ProductsList"
@using MobileStoreV2.Components.Pages.AllDashboard
@using MobileStoreV2.Components.Pages.ProductsCmpnt


@using System.Net.Http.Json
@using System.ComponentModel.DataAnnotations
@inject IDialogService DialogService
@inject IGenericService<Product> ProductService
@inject IGenericService<Brand> brandservice
@inject IGenericService<Category> categoryService
@inject IGenericService<ImageModel> imageserivce
@inject ISnackbar Snackbar

@if (_loading == null)
{
    <h5>_Loadding...</h5>
}
else
{
    @* start card continer  *@
    <MudGrid Spacing="@Spacing" Justify="Justify.Center">
            @foreach (var filter in products)
            {
               <Card ProductName="@filter.Name" ImagePath="@filter.Image?.ImagePath" Description="@filter.Description" />
            }
    </MudGrid>
}
@* end card continer  *@
@code {
    public int Spacing { get; set; } = 6;

    private bool _loading;


    public IEnumerable<Product> products = new List<Product>();
    public IEnumerable<Product> filteredProducts = new List<Product>();
    public IEnumerable<Brand> brands = new List<Brand>();
    public IEnumerable<Category> category = new List<Category>();
    public IEnumerable<ImageModel> images = new List<ImageModel>();

    protected override async Task OnInitializedAsync()
    {
        var request = await ProductService.GetAllAsync();
        if (request.Success) products = request.Data!;
        filteredProducts = products;

    }
}
